{"version":3,"sources":["src/index.js"],"names":["page","pageNum","Math","ceil","window","innerHeight","chunk","arr","size","Array","from","length","v","i","slice","originNews","k","content","news","element","document","querySelector","loadObserver","IntersectionObserver","entries","intersectionRatio","hasPrePage","hasNextPage","now","pre","next","render","target","className","threshold","observe","last","data","innerHTML","forEach","location","href"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["// 10000 条数据？  Array.from  内存\r\n// 4yu  10000 originNews 200个数组 [[50],[50]]\r\nlet page = 0; // 页码\r\nlet pageNum = Math.ceil(window.innerHeight / 50);\r\nconst chunk = (arr, size) => Array.from({\r\n        length: Math.ceil(arr.length / size)\r\n    }, (v, i) =>\r\n    arr.slice(i * size, i * size + size)\r\n)\r\n\r\nconst originNews = Array.from({\r\n    length: 1000\r\n}, (v, k) => ({\r\n    content: `新闻${k}`\r\n}))\r\nlet news = chunk(originNews, pageNum) // 当前页需要的数据\r\n    // console.log(news)\r\n\r\nconst element = document.querySelector('.news'); // 代孕的\r\nconst loadObserver = new IntersectionObserver((entries) => {\r\n        // if ()\r\n        // console.log(entries);\r\n        if (entries[0].intersectionRatio <= 0) {\r\n            return;\r\n        }\r\n        const hasPrePage = page != 0; // page 当前页面, \r\n        const hasNextPage = page != news.length - 1 // 最后一页？ \r\n        const now = news[page]\r\n        const pre = hasPrePage ? news[page - 1] : [];\r\n        const next = hasNextPage ? news[page + 1] : [];\r\n\r\n        render(pre.length, [...pre, ...now, ...next]);\r\n        page = entries[0].target.className == 'news-footer' || page == 0 ?\r\n            (hasNextPage ? page + 1 : page) :\r\n            (hasPrePage ? page - 1 : page)\r\n\r\n    }, {\r\n        threshold: [1]\r\n    }) // 监听\r\n\r\nloadObserver.observe(document.querySelector('.news-header'));\r\nloadObserver.observe(document.querySelector('.news-footer'));\r\n// 建议函数内的代码不要超过10行 封装\r\nfunction render(last, data) {\r\n    element.innerHTML = '';\r\n    data.forEach((i, v) => element.innerHTML += v == last ?\r\n        `<div id=\"news-href\">${i.content}</div>` :\r\n        `<div>${i.content}</div>`\r\n    )\r\n    window.location.href = '#news-href';\r\n}"]}